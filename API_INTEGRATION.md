# Интеграция API в Kanban приложение

## Обзор

Приложение было успешно интегрировано с API для работы с задачами и авторизацией. Все данные теперь загружаются с сервера вместо использования статических данных.

## Структура API

### Базовый URL

```
https://skypro-kanban.onrender.com
```

### Эндпоинты

#### Авторизация

- `POST /register` - Регистрация пользователя
- `POST /login` - Вход в систему
- `GET /profile` - Получение профиля пользователя

#### Задачи

- `GET /tasks` - Получение всех задач
- `GET /tasks/:id` - Получение задачи по ID
- `POST /tasks` - Создание новой задачи
- `PUT /tasks/:id` - Обновление задачи
- `DELETE /tasks/:id` - Удаление задачи

## Основные изменения

### 1. API Сервис (`src/services/api.js`)

- Создан централизованный API сервис с использованием axios
- Настроены интерцепторы для автоматического добавления токенов
- Обработка ошибок авторизации (401)

### 2. Контекст авторизации (`src/contexts/AuthContext.jsx`)

- Добавлена интеграция с API для входа и регистрации
- Автоматическая проверка токена при загрузке приложения
- Обработка ошибок авторизации

### 3. Контекст задач (`src/contexts/TasksContext.jsx`)

- Новый контекст для управления задачами
- CRUD операции для задач
- Состояние загрузки и ошибок

### 4. Обновленные компоненты

- **Main.jsx** - загрузка задач с сервера
- **LoginPage.jsx** - интеграция с API входа
- **RegisterPage.jsx** - интеграция с API регистрации
- **ViewTaskPage.jsx** - отображение задач из API
- **EditTaskPage.jsx** - редактирование задач через API
- **AddTaskPage.jsx** - создание задач через API

## Функциональность

### Авторизация

- ✅ Регистрация новых пользователей
- ✅ Вход в систему
- ✅ Автоматическая проверка токена
- ✅ Выход из системы
- ✅ Защищенные маршруты

### Управление задачами

- ✅ Загрузка всех задач с сервера
- ✅ Создание новых задач
- ✅ Редактирование существующих задач
- ✅ Удаление задач
- ✅ Просмотр деталей задачи

### Обработка ошибок

- ✅ Отображение ошибок API
- ✅ Валидация форм
- ✅ Состояния загрузки
- ✅ Error Boundary для критических ошибок

## Использование

### Авторизация

1. Перейдите на страницу регистрации
2. Заполните форму (имя, email, пароль)
3. После успешной регистрации вы будете автоматически авторизованы

### Работа с задачами

1. После авторизации вы увидите доску с задачами
2. Используйте кнопку "Добавить задачу" для создания новых задач
3. Кликните на задачу для просмотра деталей
4. Используйте кнопку "Редактировать" для изменения задачи
5. В режиме редактирования можно также удалить задачу

## Технические детали

### Токены

- JWT токены автоматически сохраняются в localStorage
- Токены добавляются к каждому API запросу
- При истечении токена пользователь автоматически перенаправляется на страницу входа

### Состояние

- Все состояния управляются через React Context
- Автоматическая синхронизация данных между компонентами
- Оптимистичные обновления UI

### Обработка ошибок

- Централизованная обработка ошибок API
- Пользовательские сообщения об ошибках
- Graceful degradation при сбоях сети

## Настройка

Для изменения API URL отредактируйте переменную `API_BASE_URL` в файле `src/services/api.js`:

```javascript
const API_BASE_URL = "https://your-api-url.com";
```

## Требования

- Node.js 16+
- npm или yarn
- Современный браузер с поддержкой ES6+

## Запуск

```bash
npm install
npm run dev
```

Приложение будет доступно по адресу `http://localhost:5173`
